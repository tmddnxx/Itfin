function HistoryInfo(t){this.data=[],this.key=t||"HISTORY"}window.cordova&&window.AppManager?(HistoryInfo.getPref=function(t,i){AppManager.getPref(t,function(t){t=t&&JSON.parse(t),i(t||[])})},HistoryInfo.setPref=function(t,i){AppManager.setPref(t,JSON.stringify(i))}):(HistoryInfo.getPref=function(t,i){i(JSON.parse(localStorage.getItem(t))||[])},HistoryInfo.setPref=function(t,i){localStorage.setItem(t,JSON.stringify(i))}),HistoryInfo.prototype.init=function(t){this.data=t},HistoryInfo.prototype.loadInfo=function(){var i=this;HistoryInfo.getPref(this.key,function(t){i.data=t})},HistoryInfo.prototype.saveInfo=function(){HistoryInfo.setPref(this.key,this.data)},HistoryInfo.prototype.get=function(t){if(t){"string"==typeof t&&(t=[t]);var a=[];for(i=0;i<this.data.length;i++)-1<t.indexOf(this.data[i][2])&&a.push(this.data[i].slice());return a}return this.data},HistoryInfo.prototype.search=function(t,a){var o=[];if(a)for("string"==typeof a&&(a=[a]),i=0;i<this.data.length;i++)-1<a.indexOf(this.data[i][2])&&(Search.compareText(t,this.data[i][0])||Search.compareText(t,this.data[i][1]))&&o.push(this.data[i].slice());else for(i=0;i<this.data.length;i++)(Search.compareText(t,this.data[i][0])||Search.compareText(t,this.data[i][1]))&&o.push(this.data[i].slice());return o},HistoryInfo.prototype.set=function(t,i){if(t){for(var a=this.data.length-1;0<=a;a--)if(this.data[a][0]==t[0]&&this.data[a][2]==t[2]){this.data.splice(a,1);break}i?(this.data.unshift(t),this.maxCount&&(this.data.length=Math.min(this.data.length,this.maxCount))):(this.data.push(t),this.maxCount&&this.maxCount<this.data.length&&this.data.splice(0,this.data.length-this.maxCount))}},HistoryInfo.prototype.getRecent=function(t){if(t){for("string"==typeof t&&(t=[t]),i=this.data.length-1;-1<i;i--)if(-1<t.indexOf(this.data[i][2]))return this.data[i];return null}return 0<this.data.length?this.data[this.data.length-1]:null},HistoryInfo.prototype.remove=function(t){for(var i=this.data.length-1;0<=i;i--)if(this.data[i][0]==t[0]&&this.data[i][2]==t[2]){this.data.splice(i,1);break}this.saveInfo()},HistoryInfo.prototype.removeAll=function(){this.data=[],this.saveInfo()},HistoryInfo.prototype.setMaxCount=function(t){this.maxCount=parseInt(t)||0};