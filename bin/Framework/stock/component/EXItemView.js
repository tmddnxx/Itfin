!async function(){afc.import("Framework/stock/component/EXSearchView.js"),afc.import("Framework/stock/library/HistoryInfo.js"),await afc.import("Framework/stock/library/MasterInfo.js"),(EXItemView=class extends AView{constructor(){super(),this.frwName="stock",this.dropMaxCount=5,this.typeArr=null,this.unshift=!1}}).prototype.init=function(t,e){AView.prototype.init.call(this,t,e);t=this.getAttr("data-type-keys");t&&((t=t.split(",")).forEach(function(t,e,a){a[e]=t.trim()}),this.setTypeArr(t)),(t=this.getAttr("data-except-keys"))&&((t=t.split(",")).forEach(function(t,e,a){a[e]=t.trim()}),this.setExceptArr(t));e=this.getChildren()[0].getChildren();this.searchTxf=e[0]},EXItemView.CONTEXT={tag:'<div data-base="EXItemView" data-class="EXItemView" class="AView-Style">\t\t\t<div data-base="AView" data-class="AView" class="AView-Style" style="width: 100%; height: 50%; left: 0px; top: 0px; background: transparent;">\t\t\t\t<input data-base="ATextField" data-class="ATextField" type="text" value="" class="ATextField-Style" data-sgap-width="1" data-stretch-width="true" data-sgap-height="1" data-stretch-height="true" style="left: 10px; top: 10px; width: calc((100% - 10px) - 100px); height: calc((100% - 10px) - 10px);"/>\t\t\t\t<button data-base="AButton" data-class="AButton" class="AButton-Style" data-sgap-height="1" data-stretch-height="true" style="right: 60px; top: 10px; width: 40px; height: calc((100% - 10px) - 10px);"></button>\t\t\t\t<button data-base="AButton" data-class="AButton" class="AButton-Style" style="right: 10px; width: 40px; height: calc((100% - 10px) - 10px); top: 10px;" data-sgap-height="1" data-stretch-height="true"></button>\t\t\t</div>\t\t\t<div data-base="AView" data-class="AView" class="AView-Style" style="width: 100%; height: 50%; left: 0px; top: 50%; background: transparent;">\t\t\t\t<div class="AFlexLayout-Style" data-base="AFlexLayout" data-class="AFlexLayout" style="width: auto; height: 100%; top: 0px; align-items: center; place-content: flex-start; left: 30px;">            \t\t<div>                \t\t<span data-class="ALabel" data-maskfunc="Number.money" data-base="ALabel" class="ALabel-Style" data-maskorigin="" data-maskparam="&quot;&quot;" style="width: auto; height: auto; left: 0px; top: 0px; position: relative; font-size: 24px;"></span>            </div>            <div><label class="ALabel-Style" data-base="ALabel" data-class="ALabel" style="width: auto; height: auto; left: 0px; top: 0px; font-size: 24px; color: rgb(141, 141, 141); position: relative; margin-left: 10px;"></label></div>        </div><div class="AFlexLayout-Style dev_AFlexLayout_Style dev_AFlexLayout-Style" data-base="AFlexLayout" data-class="AFlexLayout" style="width: auto; height: auto; place-content: flex-start flex-end; align-items: center; right: 30px; bottom: 50%; margin-bottom: -2px;">            <div>                <div class="EXTriangle-Style" color-arrow-down="#418dff" color-arrow-up="#ff5353" data-base="EXTriangle" data-class="EXTriangle" style="width: 10px; height: 10px; overflow: visible; position: relative; left: 0px; top: 1px;">                    <div style="border-style: solid; width: 0px; height: 0px; border-color: transparent; border-width: 0px; margin-top: 0px;"></div>                    <div style="margin: 0px auto; width: 4px; height: 6px; background: transparent;"></div>                </div>            </div>            <div>                <span data-class="ALabel" data-maskfunc="Number.abs|Number.money" data-base="ALabel" class="ALabel-Style" data-maskorigin="" data-maskparam="&quot;&quot;|&quot;&quot;" style="width: auto; height: auto; position: relative; margin-left: 5px; left: 0px; top: 0px; font-size: 24px;"></span>            </div>            <div><span data-class="ALabel" data-maskfunc="Number.abs|Number.percent" data-base="ALabel" class="ALabel-Style" data-maskorigin="" data-maskparam="&quot;&quot;|&quot;&quot;" style="width: auto; height: auto; position: relative; margin-left: 15px; left: 0px; top: 0px; font-size: 24px;">%</span></div>        </div><label data-maskorigin="" class="ALabel-Style NotoSansKR-Medium SZ18" data-base="ALabel" data-class="ALabel" data-maskfunc="Number.money" data-maskparam="&quot;&quot;" data-style="NotoSansKR-Medium SZ18" style="width: auto; height: auto; position: absolute; top: 30px; color: rgb(0, 0, 0); right: 30px; margin-top: -2px; font-size: 24px;"></label></div>\t\t\t</div>\t\t</div>',defStyle:{width:"100%",height:"120px"},events:["change","swipe","longtab","scroll","scrollleft","scrollright","scrolltop","scrollbottom"]},EXItemView.historyInfo=new HistoryInfo,EXItemView.masterInfo=new MasterInfo,EXItemView.setHistoryInfo=function(t){EXItemView.historyInfo=t},EXItemView.getHistoryInfo=function(){return EXItemView.historyInfo},EXItemView.setMasterInfo=function(t){EXItemView.masterInfo=t},EXItemView.getMasterInfo=function(){return EXItemView.masterInfo},EXItemView.prototype.setItemInfo=function(t,e){t=(t=t||EXItemView.historyInfo.getRecent(this.typeArr))||EXItemView.masterInfo.getDefaultItemInfo(this.typeArr),EXItemView.historyInfo.set(t,this.unshift),EXItemView.historyInfo.saveInfo(),this.itemInfo=t,this.setText(t[1]),e&&this.reportEvent("change",t)},EXItemView.prototype.getItemInfo=function(){return this.itemInfo},EXItemView.prototype.setText=function(t){this.searchTxf&&this.searchTxf.setText&&this.searchTxf.setText(t)},EXItemView.prototype.getItem=function(){if(this.itemInfo)return EXItemView.masterInfo.getItem(this.itemInfo[0],this.itemInfo[2])},EXItemView.prototype.setTypeArr=function(t){this.typeArr=t},EXItemView.prototype.getTypeArr=function(){return this.typeArr},EXItemView.prototype.setExceptArr=function(t){this.exceptArr=t},EXItemView.prototype.getExceptArr=function(){return this.exceptArr},EXItemView.prototype.setDropMaxCount=function(t){this.dropMaxCount=t},EXItemView.prototype.getDropMaxCount=function(){return this.dropMaxCount},EXItemView.prototype.openDrop=function(a){if(!this.isDev()){var i=this,t=0,e=this.searchTxf.$ele,o=this.searchTxf.getHeight();if(a&&(t=a.length*o+1,a.length>this.dropMaxCount)&&(t=this.dropMaxCount*o+1),this.dropWin)if(this.dropWin.setHeight(t),this.dropWin.getView().setData)this.dropWin.getView().setData(a);else{var s=this.dropWin.getView().getChildren()[0];s.removeAll();for(var r=0;r<a.length;r++)s.addRowWithData([a[r][1]],a[r])}else a&&0!=a.length&&(this.dropWin=new AWindow("SearchDropView"),this.dropWin.setWindowOption({isModal:!0,isFocusLostClose:!0,modalBgOption:"none"}),this.dropWin.open("Framework/stock/layout/dropview.html",this.getContainer(),e.offset().left,e.offset().top+e.outerHeight(),e.outerWidth(),t).then(function(){var t=i.dropWin.getView().getChildren()[0];t.$rowTmpl.attr("height",o),t.addEventListener("select",i,"onDropGridSelect");for(var e=0;e<a.length;e++)t.addRowWithData([a[e][1]],a[e])}),this.dropWin.setResultCallback(function(t,e){i.dropWin=null,0==t&&i.setItemInfo(e,!0)}))}},EXItemView.prototype.openSearchWindow=async function(){if(!this.isDev()){for(var a=this,t=this.searchWin=new AFrameWnd("SearchWindow"),e=new EXSearchView,i=(e.init(),e.setStyleObj({width:"100%",height:"100%",position:"relative",background:"white"}),t.setWindowOption({isModal:!0,isFocusLostClose:!0,isResizable:!1}),await t.openFull(e,this.getContainer()),t.setTitleText(""),e.setData(EXItemView.masterInfo.get()),e.getChildren()[0]),o=(e.txf=i.getChildren()[0],e.btn=i.getChildren()[1],e.grd=e.getChildren()[1],i.setStyle("background","transparent"),e.btn.setText("검색"),e.btn.setStyleObj({"background-image":"linear-gradient(rgb(255, 255, 255), rgb(234, 234, 234) 100%)",border:"1px solid rgb(193, 193, 193)"}),e.txf.setStyle("background","transparent"),e.txf.addEventListener("change",this,"onSearchTextFieldChange"),e.btn.addEventListener("click",this,"onSearchTextFieldChange"),e.grd.addEventListener("select",this,"onSearchGridSelect"),e.searchData(null,this.typeArr,this.exceptArr)),s=0;s<o.length;s++)e.grd.addRowWithData([EXItemView.masterInfo.getInfoByItem(o[s])[1]],o[s]);t.setResultCallback(function(t,e){a.searchWin=null,0==t&&a.setItemInfo(EXItemView.masterInfo.getInfoByItem(e),!0)})}},EXItemView.prototype.onSearchTextFieldChange=function(t,e,a){var i=this.searchWin.getView(),o=i.searchData(i.txf.getText(),this.typeArr,this.exceptArr);i.grd.removeAll();for(var s=0;s<o.length;s++)i.grd.addRowWithData([EXItemView.masterInfo.getInfoByItem(o[s])[1]],o[s])},EXItemView.prototype.onSearchGridSelect=function(t,e,a){this.searchWin&&this.searchWin.close(0,t.getDataByOption(e))},EXItemView.prototype.onDropGridSelect=function(t,e,a){this.dropWin&&(t=t.getDataByOption(e),this.dropWin.close(0,t))}}();