class ChartView extends AView{constructor(){super(),this.frwName="stock",this.delegator=null,this.item=null,this.isMultiChart=!1,this.selectBtn=null,this.isInit=!1,this.sendItemArr=new Array,this.isSending=!1,this.realQueryName="QR000001",this.noSend=!1,this.noReal=!1,this.term=1,this.termMap={"일":1,"주":2,"월":3,"년":5},this.termMap2={1:"일",2:"주",3:"월",5:"년"},this.jipyoMap={"미결제약정":{chkMid:["005","006","012","013","014","016","018","019","062","067","091","099","100","103","104","105","114"],qryName:"QR000011",gidCode:51,seqArr:[],func:this.func6,fid:"D1미결제약정수량"},"기관 순매수":{chkMid:["001","003"],qryName:"QR000009",gidCode:52,seqArr:[8],joinType:0,func:this.func1,fid:"D1투자자순매수수량"},"기관 순매수 누적":{chkMid:["001","003"],qryName:"QR000009",gidCode:52,seqArr:[8],joinType:0,func:this.func2},"시가총액":{chkMid:["001","003"],qryName:"QR000009",gidCode:51,seqArr:[8],func:this.func1,fid:"D1시가총액"},"외국인 보유비중":{chkMid:["001","003"],qryName:"QR000009",gidCode:51,seqArr:[11],func:this.func1,fid:"D1외국인보유율_당일"},"외국인 보유량":{chkMid:["001","003"],qryName:"QR000009",gidCode:51,seqArr:[11],func:this.func1,fid:"D1외국인보유주식수"},"외국인 순매수":{chkMid:["001","003"],qryName:"QR000009",gidCode:51,seqArr:[14],func:this.func1,fid:"D1투자자순매수수량"},"종목거래량회전률":{qryName:"QR000009",gidCode:51,seqArr:[11],func:this.func1,fid:"D1거래량회전율"},"거래대금회전률":{qryName:"QR000009",gidCode:51,seqArr:[11],func:this.func3},"투자자별(거래소)":{qryName:"QR000005",gidCode:52,seqArr:[10,14,8,9],joinType:1,func:this.func7,fid:"종목투자자별순매수거래량",item:{"D1단축코드":"1","D1시장분류코드":"002"}},"투자자별(코스닥)":{qryName:"QR000005",gidCode:52,seqArr:[10,14,8,9],joinType:1,func:this.func7,fid:"종목투자자별순매수거래량",item:{"D1단축코드":"1","D1시장분류코드":"004"}},"투자자별(콜옵션)":{qryName:"QR000012",gidCode:52,seqArr:[10,11,8,9],joinType:0,func:this.func4,fid:"D1투자자콜순매수수량",item:{"D1단축코드":"00000000","D1시장분류코드":"006"}},"투자자별(풋옵션)":{qryName:"QR000012",gidCode:52,seqArr:[10,11,8,9],joinType:0,func:this.func4,fid:"D1투자자풋순매수수량",item:{"D1단축코드":"00000000","D1시장분류코드":"006"}},"투자자별(K200선물)":{qryName:"QR000013",gidCode:52,seqArr:[10,11,8,9],joinType:0,func:this.func4,fid:"D1SPREAD합산전체투자자순매수수량",item:{"D1단축코드":"00000000","D1시장분류코드":"005"}},"투자자별(K200)":{qryName:"QR000005",gidCode:52,seqArr:[10,14,8,9],joinType:1,func:this.func7,fid:"종목투자자별순매수거래량",item:{"D1단축코드":"51","D1시장분류코드":"002"}},"프로그램순매수 거래소":{chkMid:["001","003"],qryName:"QR000010",gidCode:54,seqArr:[],func:this.func5,fid:"D1전체프로그램매매순매수거래대금",item:{"D1시장분류코드":"001"}},"프로그램순매수 코스닥":{chkMid:["001","003"],qryName:"QR000010",gidCode:54,seqArr:[],func:this.func5,fid:"D1전체프로그램매매순매수거래대금",item:{"D1시장분류코드":"003"}}},this.midRoundMap={"001":0,"002":2,"003":0,"004":2,"005":2,"006":2,"009":0,"010":0,"012":2,"013":2,"014":2,"016":2,"017":2,"018":2,"019":1,"023":1,"062":2,"064":2,"067":2,"068":0,"079":2,"080":2,"081":2,"082":2,"084":2,"086":2,"088":1,"089":1,"091":0,"099":2,100:2,102:2,103:2,104:2,105:2,114:0,118:0,121:2,167:2,171:2},this.termBtn=null,this.minBtn=null,this.tickBtn=null,this.termBtn2=null,this.tickBtn2=null,this.win=null,this.beforeOption=null,this.afterOptions=null,this.chartConfig={useAdPrice:0,minList:["1:1","1:3","1:5","1:10","1:15","1:30","1:45","1:60"],tickList:["1:1","1:3","1:5","1:10","1:20","1:30","1:60","1:120"],lastValue:[0,1],limitCnt:200},this.searchType=0,this.nextKey=0,this.nextDate="",this.realData={},this.mainKeyInfo=null,this.itemBoxView=null}}(window.ChartView=ChartView).CONTEXT={tag:'<div data-base="ChartView" data-class="ChartView" class="AView-Style"></div>',defStyle:{width:"400px",height:"200px"},events:["swipe","longtab","scroll","scrollleft","scrollright","scrolltop","scrollbottom","drop","dragstart","dragend"]},ChartView.chartColorBasic=["ff0000","0070ff","000000","000000","ff3e47","007aff","ae6428","00b07c","ff33ff","102, 0, 153","152, 116, 232","158,  40, 255","230, 100,  39","125, 125, 125","ff3e47","007aff","ff3e47","007aff","ae6428","00b07c","ff33ff","171926","f0f0f0","171926","f0f0f0","171926","f0f0f0","171926","f0f0f0","171926","f0f0f0","171926","f0f0f0","0c5196","ffffff","ffffff","000000","ffffff","ffffff","ffffff","303047","000000","7f7f7f","dfdfdf","7f7f7f","ffffff","ffffff","000000","22223b","dfdfdf","ffffff","c6c6ce","dfdfdf","7a7c8b","171926","ffffff","171926","ffffff","ffffff","ffffff","7a7c8b","e4e5ec","c6c6ce","494b61","ffffff","000000","e4e5ec","f1f3f5","22223c","222a43","ffffff","0c5196","f0f0f0","737373","1b1e2d","414450","ff0000","0070ff","000000","000000","ffffff","","","","","","","","","","","","","","","","18a709","ff0000","ff0000","000000","000000","","","","","","","","","","","","","","",""],ChartView.chartColorWhite=["ff0000","0070ff","000000","000000","ff3e47","007aff","ae6428","00b07c","ff33ff","102, 0, 153","152, 116, 232","158,  40, 255","230, 100,  39","125, 125, 125","ff3e47","007aff","ff3e47","007aff","ae6428","00b07c","ff33ff","eaeaea","000000","dedede","000000","eaeaea","000000","dedede","000000","eaeaea","000000","dedede","000000","0c5196","ffffff","ffffff","000000","ffffff","ffffff","ffffff","303047","000000","7f7f7f","dfdfdf","7f7f7f","ffffff","ffffff","000000","22223b","dfdfdf","ffffff","c6c6ce","dfdfdf","7a7c8b","eaeaea","000000","dedede","000000","ffffff","ffffff","7a7c8b","e4e5ec","c6c6ce","c1c1c1","ffffff","000000","c1c1c1","ffffff","000000","dbdde7","ffffff","0c5196","ffffff","737373","ffffff","ffffff","ff0000","0070ff","000000","000000","000000","","","","","","","","","","","","","","","","ff0000","0070ff","000000","000000","000000","","","","","","","","","","","","","","",""],ChartView.prototype.init=function(t,e){AView.prototype.init.call(this,t,e),this.isDev()||(this.getContainer().useNative=!0,this.getContainer().chartViewList||(this.getContainer().chartViewList=new Array),this.getContainer().chartViewList.push(this))},ChartView.prototype.isFIndex=function(t){return-1<$.inArray(t[2],["079","080","081","082","084","086","107"])},ChartView.prototype.setDelegator=function(t){this.delegator=t},ChartView.prototype.setRealQueryName=function(t){this.realQueryName=t},ChartView.prototype.setItemInfo=function(t){this.unregisterReal(),this.item=t,this.mainKeyInfo={},this.mainKeyInfo["D1단축코드"]=t[0],this.mainKeyInfo["D1단축명"]=t[1],this.mainKeyInfo["D1시장분류코드"]=t[2]},ChartView.prototype.updatePosition=function(t,e){AView.prototype.updatePosition.call(this,t,e),this.isDev()||afc.isSimulator||ChartManager.setChartSize(this.$ele)},ChartView.prototype.setSearchType=function(t,e){this.searchType=t,e&&(this.term=e)},ChartView.prototype.getSearchType=function(){var t=[this.searchType];return this.term&&t.push(this.term),t},ChartView.prototype.onIndicatorSignalList=function(t,e,i){this.delegator&&this.delegator.onIndicatorSignalList&&this.delegator.onIndicatorSignalList(t,e,i)},ChartView.prototype.onSignalDateChange=function(t,e){this.delegator&&this.delegator.onSignalDateChange&&this.delegator.onSignalDateChange(t,e)},ChartView.prototype.showChart=function(){this.isDev()||afc.isSimulator||ChartManager.showChart([this.getElementId()])},ChartView.prototype.hideChart=function(){this.isDev()||afc.isSimulator||ChartManager.hideChart([this.getElementId()])},ChartView.prototype.settingBtns=function(t,e){t&&(this.termBtn=t[0],this.minBtn=t[1],this.tickBtn=t[2],this.termBtn.addEventListener("click",this,"onTermBtnClick"),this.minBtn.addEventListener("click",this,"onMinBtnClick"),this.tickBtn.addEventListener("click",this,"onTickBtnClick")),this.itemBoxView=e},ChartView.prototype.settingBtns2=function(t,e){t&&(this.termBtn2=t[0],this.tickBtn2=t[1],this.termBtn2.addEventListener("click",this,"onTermBtn2Click"),this.tickBtn2.addEventListener("click",this,"onTickBtn2Click"),this.win=AWindow.setView("Framework/stock/layout/ChartTypeWindow.html","MS000002"),this.win.setWindowOption({isFocusLostClose:!0,modalBgOption:"none"})),this.itemBoxView=e},ChartView.prototype.setViewDataCount=function(t){this.chartConfig.limitCnt=t,this.isDev()||afc.isSimulator||ChartManager.setViewDataCount([this.getElementId(),t])},ChartView.prototype.showWin=function(t,e){var i=new AWindow("ChartTypeWindow");i.element||i.init(),i.onCreateDone=function(){this.getView().setData()},i.setView("Framework/stock/layout/ChartTypeWindow.html"),i.setWindowOption({isFocusLostClose:!0,modalBgOption:"none"}),i.setResultListener(this),this.clickBtn=t,i.getView().listData=e,i.open(null,this.getContainer(),t.$ele.offset().left,t.$ele.offset().top+t.$ele.outerHeight(),t.$ele.outerWidth(),e.length*t.$ele.outerHeight())},ChartView.prototype.onTermBtnClick=function(t,e){this.showWin(t,["일","주","월","년"])},ChartView.prototype.onTermBtn2Click=function(t,e){this.showWin(t,["일","주","월","년","분","틱"])},ChartView.prototype.onMinBtnClick=function(t,e){this.showWin(t,this.chartConfig.minList)},ChartView.prototype.onTickBtnClick=function(t,e){this.showWin(t,this.chartConfig.tickList)},ChartView.prototype.onTickBtn2Click=function(t,e){"분"==this.termBtn2.getText()?this.showWin(t,this.chartConfig.minList):"틱"==this.termBtn2.getText()&&this.showWin(t,this.chartConfig.tickList)},ChartView.prototype.initConfig=function(){this.resetBtnState();var t=this.getChartConfig();this.searchType=t.lastValue[0],1==this.searchType?(this.minBtn.setText(t.lastValue[1]),this.selectBtn=this.minBtn):2==this.searchType?(this.tickBtn.setText(t.lastValue[1]),this.selectBtn=this.tickBtn):(1==t.lastValue[1]?this.termBtn.setText("일"):2==t.lastValue[1]?this.termBtn.setText("주"):3==t.lastValue[1]?this.termBtn.setText("월"):5==t.lastValue[1]&&this.termBtn.setText("년"),this.selectBtn=this.termBtn),this.selectBtn.addClass("BT_CO2_NOR"),this.setSearchType(t.lastValue[0],t.lastValue[1])},ChartView.prototype.setChartOption=function(t,e){this.beforeOptions=t,this.afterOptions=e,"WHITE"==theApp.themeMode||null==theApp.themeMode?this.beforeOptions.ChartColor=ChartView.chartColorWhite:"BLACK"==theApp.themeMode&&(this.beforeOptions.ChartColor=ChartView.chartColorBasic),"kor"==theApp.colorMode||null==theApp.colorMode?(this.beforeOptions.ChartColor[0]="ff0000",this.beforeOptions.ChartColor[1]="0070ff"):"eng"==theApp.colorMode&&(this.beforeOptions.ChartColor[0]="18a709",this.beforeOptions.ChartColor[1]="ff0000")},ChartView.prototype.loadChartConfig=function(){var t;this.beforeOptions.LoadChart&&(t=localStorage.getItem(this.beforeOptions.LoadChart))&&(this.chartConfig=JSON.parse(t))},ChartView.prototype.getChartConfig=function(){return this.chartConfig},ChartView.prototype.setMoreData=function(t){this.realData["D1연속여부"]=t},ChartView.prototype.loadChartLayout=function(){this.isInit=!1,this.loadChartConfig(),this.termBtn&&this.initConfig(),this.isDev()||afc.isSimulator||ChartManager.loadChartLayout(this.$ele,this.beforeOptions,this.afterOptions),this.isDev()||afc.isSimulator||ChartManager.setDelegator(this)},ChartView.prototype.onChartInit=function(){this.isInit=!0,this.tempData&&(this.updateOutputData(this.tempData),this.tempData=null)},ChartView.prototype.setFixedData=function(t){for(var e in t)this.realData[e]=t[e]},ChartView.prototype.setSearchData=function(t){for(var e in t)this.realData[e]=t[e]},ChartView.prototype.onGetPeriodInfo=function(){return this.chartConfig.minList.join(";")+"/"+this.chartConfig.tickList.join(";")},ChartView.prototype.openDlg=function(t,e){this.isDev()||afc.isSimulator||ChartManager.openDlg([this.getElementId(),t.$ele,e])},ChartView.prototype.clearChart=function(){this.isDev()||afc.isSimulator||ChartManager.setDataClear([this.getElementId(),"1"])},ChartView.prototype.updateOutputData=function(t){this.isDev()||afc.isSimulator||(ChartManager.tabManager=this.getContainer().view,ChartManager.updateOutputData([this.getElementId(),{ref:this.realData,data:t}]),this.isInit)||(this.tempData=t)},ChartView.prototype.updateRealData=function(){this.isDev()||afc.isSimulator||ChartManager.updateRealData([this.getElementId(),this.realData])},ChartView.prototype.resetBtnState=function(){this.termBtn&&(this.termBtn.removeClass("BT_CO2_NOR"),this.termBtn.setText("일")),this.minBtn&&(this.minBtn.removeClass("BT_CO2_NOR"),this.minBtn.setText("분")),this.tickBtn&&(this.tickBtn.removeClass("BT_CO2_NOR"),this.tickBtn.setText("틱")),this.termBtn2&&(this.termBtn2.removeClass("BT_CO2_NOR"),this.termBtn2.setText("일")),this.tickBtn2&&(this.tickBtn2.removeClass("BT_CO2_NOR"),this.tickBtn2.setText("1"))},ChartView.prototype.onRequestData=function(t,e){this.requestData(t,e)},ChartView.prototype.requestData=function(t,e){this.resetBtnState();var i,n=t[0],s=t[1],a=t[2],r=t[3],t=t[4]||1;6==r?(this.searchType=1,this.setLastValue(t),this.minBtn&&(this.minBtn.setText(t),this.selectBtn=this.minBtn),this.tickBtn2&&(this.tickBtn2.$ele.show(),this.tickBtn2.setText(t),this.termBtn2.setText("분"),i=this.tickBtn2)):7==r?(this.searchType=2,this.setLastValue(t),this.tickBtn&&(this.tickBtn.setText(t),this.selectBtn=this.tickBtn),this.tickBtn2&&(this.tickBtn2.$ele.show(),this.tickBtn2.setText(t),this.termBtn2.setText("틱"),i=this.tickBtn2)):(3!=this.searchType&&(this.searchType=0),this.setLastValue(this.termMap[r]),1==r?(this.termBtn&&this.termBtn.setText("일"),this.termBtn2&&(this.termBtn2.setText("일"),this.tickBtn2&&this.tickBtn2.$ele.hide(),i=this.termBtn2)):2==r?(this.termBtn&&this.termBtn.setText("주"),this.termBtn2&&(this.termBtn2.setText("주"),this.tickBtn2&&this.tickBtn2.$ele.hide(),i=this.termBtn2)):3==r?(this.termBtn&&this.termBtn.setText("월"),this.termBtn2&&(this.termBtn2.setText("월"),this.tickBtn2&&this.tickBtn2.$ele.hide(),i=this.termBtn2)):5==r&&(this.termBtn&&this.termBtn.setText("년"),this.termBtn2)&&(this.termBtn2.setText("년"),this.tickBtn2&&this.tickBtn2.$ele.hide(),i=this.termBtn2),this.termBtn&&(this.selectBtn=this.termBtn)),this.selectBtn&&this.selectBtn.addClass("BT_CO2_NOR"),i&&i.addClass("BT_CO2_NOR"),this.itemBoxView?this.itemBoxView.setItemInfo([n,s,a],!0):(this.setItemInfo([n,s,a]),this.sendDataManage())},ChartView.prototype.sendDataManage=function(){var n=this;this.getContainer().view.sendData(this.realQueryName,function(t,e){var i=t.getBlockData("InBlock1");i[0]=n.mainKeyInfo,n.noReal||(this.registerReal(n.realQueryName,i,null,[n],0),t.enableFlag("realFlag"))},function(t,e){t?(n.setFixedData({"D1에러여부":!1,"D1초기화여부":!0,"D1수정주가여부":n.chartConfig.useAdPrice,"D1데이터개수":n.chartConfig.limitCnt,"D1단축코드":n.item[0],"D1종목명":n.item[1],"D1시장분류코드":n.item[2],"D1가격소수점자리수":n.midRoundMap[MasterInfo.formatMarketCode(n.item[2])]?n.midRoundMap[MasterInfo.formatMarketCode(n.item[2])]:0}),n.sendChartData(0)):-1==n.searchType&&n.clearChart()})},ChartView.prototype.onScrollEnd=function(){this.sendChartData(1)},ChartView.prototype.setDefaultAndMore=function(t){t?this.setFixedData({"D1초기화여부":!1,"D1연속여부":t}):(this.setFixedData({"D1초기화여부":!0,"D1연속여부":t}),this.nextKey=0,this.nextDate="")},ChartView.prototype.sendChartData=function(t){var i,e,n;t&&0==this.nextKey?ChartManager.toast(Message.LastList):(this.setDefaultAndMore(t),(i=this).setMarketCategory(this.item[2]),0!=this.searchType&&3!=this.searchType||(this.isFIndex(this.item)?this.searchType=3:this.searchType=0),-1==this.searchType?(this.setPeriod([1,""]),e="001"==i.mainKeyInfo["D1시장분류코드"]||"003"==i.mainKeyInfo["D1시장분류코드"],this.getContainer().view.sendData(e?"QR000006":"QR000002",function(t,e){t.getBlockData("InBlock1")[0]=i.mainKeyInfo,t.getBlockData("InBlock3")[0]={"D1metrix의갯수":i.chartConfig.limitCnt,D1GID_CODE:53,"D1일_주_월_분기_년":1,D1prev:0,D1next:i.nextKey}},function(t,e){t?i.isMultiChart?-1<i.selectedIndex?i.nextKeyArr[i.selectedIndex]=t.getNextKey():i.nextKeyArr[i.tempIndex]=t.getNextKey():i.nextKey=t.getNextKey():i.clearChart()})):0==this.searchType?(n=this.termBtn?this.termMap[this.termBtn.getText()]:this.term,(e="001"==i.mainKeyInfo["D1시장분류코드"]||"003"==i.mainKeyInfo["D1시장분류코드"])||(this.chartConfig.useAdPrice=0),this.setPeriod([n,""]),this.getContainer().view.sendData(0==this.chartConfig.useAdPrice&&e?"QR000006":"QR000002",function(t,e){t.getBlockData("InBlock1")[0]=i.mainKeyInfo,t.getBlockData("InBlock3")[0]={"D1metrix의갯수":i.chartConfig.limitCnt,D1GID_CODE:53,"D1일_주_월_분기_년":n,D1prev:0,D1next:i.nextKey}},function(t,e){t&&(i.isMultiChart?-1<i.selectedIndex?i.nextKeyArr[i.selectedIndex]=t.getNextKey():i.nextKeyArr[i.tempIndex]=t.getNextKey():i.nextKey=t.getNextKey())})):1==this.searchType?(n=this.minBtn?this.minBtn.getText():this.term,this.setPeriod([6,n]),this.getContainer().view.sendData("QR000003",function(t,e){t.getBlockData("InBlock1")[0]=i.mainKeyInfo,t.getBlockData("InBlock3")[0]={"D1metrix의갯수":i.chartConfig.limitCnt,D1GID_CODE:111,"D1Intra주기":60*n,"D1조회일수":20,D1end_date:i.nextDate,D1next:i.nextKey}},function(t,e){t&&(i.isMultiChart?-1<i.selectedIndex?(i.nextKeyArr[i.selectedIndex]=t.getNextKey(),i.nextDateArr[i.selectedIndex]=t.getNextDate()):(i.nextKeyArr[i.tempIndex]=t.getNextKey(),i.nextDateArr[i.tempIndex]=t.getNextDate()):(i.nextKey=t.getNextKey(),i.nextDate=t.getNextDate()))})):2==this.searchType?(n=this.tickBtn?this.tickBtn.getText():1,this.setPeriod([7,n]),this.getContainer().view.sendData("QR000004",function(t,e){t.getBlockData("InBlock1")[0]=i.mainKeyInfo,t.getBlockData("InBlock3")[0]={"D1metrix의갯수":i.chartConfig.limitCnt,D1GID_CODE:2,"D1조회일수":20,D1end_date:i.nextDate,D1next:i.nextKey,"D1틱봉처리시틱개수":n}},function(t,e){t&&(i.isMultiChart?-1<i.selectedIndex?(i.nextKeyArr[i.selectedIndex]=t.getNextKey(),i.nextDateArr[i.selectedIndex]=t.getNextDate()):(i.nextKeyArr[i.tempIndex]=t.getNextKey(),i.nextDateArr[i.tempIndex]=t.getNextDate()):(i.nextKey=t.getNextKey(),i.nextDate=t.getNextDate()))})):3==this.searchType&&(n=this.term,this.setPeriod([n,""]),this.getContainer().view.sendData("QR000015",function(t,e){t.getBlockData("InBlock1")[0]=i.mainKeyInfo,t.getBlockData("InBlock3")[0]={"D1metrix의갯수":i.chartConfig.limitCnt,D1GID_CODE:51,"D1일_주_월_분기_년":n,D1prev:0,D1next:i.nextKey}},function(t,e){t&&(t.printQueryData(),i.isMultiChart?-1<i.selectedIndex?i.nextKeyArr[i.selectedIndex]=t.getNextKey():i.nextKeyArr[i.tempIndex]=t.getNextKey():i.nextKey=t.getNextKey())})))},ChartView.prototype.onChangePeriodOnStorage=function(t,e){this.chartConfig.minList=t,this.chartConfig.tickList=e,this.saveConfigInfo()},ChartView.prototype.onChangeAdjustedStock=function(t){var e="001"==this.mainKeyInfo["D1시장분류코드"]||"003"==this.mainKeyInfo["D1시장분류코드"];this.chartConfig.useAdPrice=1==(t=e?t:!1)||"1"==t?1:0,this.saveConfigInfo(),this.setFixedData({"D1수정주가여부":this.chartConfig.useAdPrice}),this.sendChartData(0)},ChartView.prototype.setLastValue=function(t){this.chartConfig.lastValue=[this.searchType,t],this.saveConfigInfo()},ChartView.prototype.unregisterReal=function(){this.noReal||this.mainKeyInfo,this.realData=new Object},ChartView.prototype.destroyChart=function(){this.unregisterReal(),this.isDev()||afc.isSimulator||ChartManager.destroy(this.getElementId()),this.isInit=!1},ChartView.prototype.setAccrueName=function(t){t=[this.getElementId(),t];this.isDev()||afc.isSimulator||ChartManager.setAccrueName(t)},ChartView.prototype.setAccrueData=function(t){t=[this.getElementId(),t];this.isDev()||afc.isSimulator||ChartManager.setAccrueData(t)},ChartView.prototype.setShowCrossLine=function(t){t=[this.getElementId(),t[0]];this.isDev()||afc.isSimulator||ChartManager.setShowCrossLine(t)},ChartView.prototype.setTimeZone=function(t){t=[this.getElementId(),t[0]];this.isDev()||afc.isSimulator||ChartManager.setTimeZone(t)},ChartView.prototype.setDivideNum=function(t){t=[this.getElementId(),t[0]];this.isDev()||afc.isSimulator||ChartManager.setDivideNum(t)},ChartView.prototype.saveConfigInfo=function(){localStorage.setItem(this.beforeOptions.LoadChart,JSON.stringify(this.chartConfig))},ChartView.prototype.setPeriod=function(t){t=[this.getElementId(),t[0],t[1]];this.isDev()||afc.isSimulator||ChartManager.setPeriod(t)},ChartView.prototype.setMarketCategory=function(t){t=[this.getElementId(),t];this.isDev()||afc.isSimulator||ChartManager.setMarketCategory(t)},ChartView.prototype.onRequestMarketIndicatorName=function(r,h){if(0==this.searchType&&1==(this.termBtn?this.termMap[this.termBtn.getText()]:this.term)){var o=this,f=this.jipyoMap[r],c={};for(t in this.mainKeyInfo)c[t]=this.mainKeyInfo[t];if(f.item)for(var t in f.item)c[t]=f.item[t];if(f.chkMid&&0<f.chkMid.length){for(var e=!1,i=0;i<f.chkMid.length;i++)if(f.chkMid[i]==c["D1시장분류코드"]){e=!0;break}if(!e)return}this.getContainer().view.sendData(f.qryName,function(t,e){var i=t.getBlockData("InBlock1");if(i[0]=c,0<f.seqArr.length){var n=t.getBlockData("InBlock2");if(f.joinType){var s;n[0]=s={};for(var a=0;a<f.seqArr.length;a++)i[a]=c,s["D"+(a+1)+"종목투자자별SEQ"]=[f.seqArr[a]]}else n[0]={"D1투자자SEQ":f.seqArr}}t.getBlockData("InBlock3")[0]={"D1metrix의갯수":h,D1GID_CODE:f.gidCode,"D1일_주_월_분기_년":1,D1prev:"",D1next:""}},function(t,e){if(t)if("QR000005"==o.jipyoMap.queryName){var i=f.func(t.getBlockData("OutBlock1"),f.fid),n=null;(a=new Array).push(r+"_개인"),a.push(r+"_외국인"),a.push(r+"_기관계"),a.push(r+"_기타법인");for(var s=0;s<a.length;s++){if(n=i[s],o.isDev()||afc.isSimulator)return;ChartManager.setMarketData(o.getElementId(),{ref:{marketIndicatorTitle:a[s],dataCount:n.length},data:n})}}else{var i=f.func(t.getBlockData("OutBlock1"),f.fid),n=null,a=new Array;1<i.length?(a.push(r+"_개인"),a.push(r+"_외국인"),a.push(r+"_기관계"),a.push(r+"_기타법인")):a.push(r);for(s=0;s<i.length;s++){if(n=i[s],o.isDev()||afc.isSimulator)return;ChartManager.setMarketData(o.getElementId(),{ref:{marketIndicatorTitle:a[s],dataCount:n.length},data:n})}}})}},ChartView.prototype.func1=function(t,e){for(var i,n=new Array,s=0;s<t.length;s++)i=t[s],n.push(i[e]);return[n]},ChartView.prototype.func2=function(t){for(var e=new Array,i=0,n=t.length,s=(e.length=n)-1;-1<s;s--)i+=t[s]["D1투자자순매수수량"],e[s]=i;return[e]},ChartView.prototype.func3=function(t){for(var e=new Array,i=0;i<t.length;i++){var n=(n=(n=t[i])["D1거래대금_30609과동일"]/n["D1시가총액"]*100).toFixed(2);e.push(n)}return[e]},ChartView.prototype.func4=function(t,e){for(var i,n=new Array,s=new Array,a=new Array,r=new Array,h=new Array,o=0;o<t.length;o++)i=t[o],o%4==0?s.push(i[e]):o%4==1?a.push(i[e]):o%4==2?r.push(i[e]):o%4==3&&h.push(i[e]);return n.push(s),n.push(a),n.push(r),n.push(h),n},ChartView.prototype.func5=function(t,e){for(var i,n=new Array,s=0;s<t.length;s++)i=t[s],n.push(i[e]/1e3);return[n]},ChartView.prototype.func6=function(t,e){for(var i,n=new Array,s=0;s<t.length;s++)i=t[s],n.push(Math.round(i[e]/100));return[n]},ChartView.prototype.func7=function(t,e){for(var i,n=new Array,s=new Array,a=new Array,r=new Array,h=new Array,o=0;o<t.length;o++)i=t[o],s.push(i["D1"+e]),a.push(i["D2"+e]),r.push(i["D3"+e]),h.push(i["D4"+e]);return n.push(s),n.push(a),n.push(r),n.push(h),n},ChartView.prototype.onWindowResult=function(t,e,i){if("ChartTypeWindow"==i.getId()&&null!=t){var n;switch(this.resetBtnState(),this.clickBtn.getComponentId()){case"MinBtn":this.setSearchType(1,t),this.setLastValue(t),n=this.clickBtn;break;case"TickBtn":this.setSearchType(2,t),this.setLastValue(t),n=this.clickBtn;break;case"TermBtn":this.setSearchType(0,this.termMap[t]),this.setLastValue(this.termMap[t]),n=this.clickBtn;break;case"MinBtn2":-1<$.inArray(t,["일","주","월","년"])?(this.setSearchType(0,this.termMap[t]),this.setLastValue(this.termMap[t]),this.termBtn&&this.termBtn.setText(t),this.tickBtn2.setText("1"),this.tickBtn2.$ele.hide(),n=this.clickBtn):"분"==t?(this.tickBtn2.$ele.show(),this.minBtn&&this.minBtn.setText("1"),this.setSearchType(1,"1"),this.setLastValue("1"),n=this.tickBtn2):"틱"==t&&(this.tickBtn2.$ele.show(),this.tickBtn&&this.tickBtn.setText("1"),this.setSearchType(2,"1"),this.setLastValue("1"),n=this.tickBtn2);break;case"TickBtn2":1==this.getSearchType()[0]?(this.termBtn2.setText("분"),this.minBtn&&this.minBtn.setText(t),this.setSearchType(1,t),this.setLastValue(t),n=this.clickBtn):2==this.getSearchType()[0]&&(this.termBtn2.setText("틱"),this.tickBtn&&this.tickBtn.setText(t),this.setSearchType(2,t),this.setLastValue(t),n=this.clickBtn)}this.clickBtn.setText(t),this.selectBtn=n,this.selectBtn.addClass("BT_CO2_NOR"),this.sendChartData(0)}},ChartView.prototype.landscape2portrait=function(){this.termBtn&&(this.termBtn.removeClass("BT_CO2_NOR"),this.termBtn.setText("일")),this.minBtn&&(this.minBtn.removeClass("BT_CO2_NOR"),this.minBtn.setText("분")),this.tickBtn&&(this.tickBtn.removeClass("BT_CO2_NOR"),this.tickBtn.setText("틱"));var t,e=this.getSearchType();switch(e[0]){case 0:this.termBtn&&(t=e[1]||0,this.termBtn.setText(this.termMap2[t]),this.termBtn.addClass("BT_CO2_NOR"));break;case 1:this.minBtn&&(t=e[1]||1,this.minBtn.setText(t),this.minBtn.addClass("BT_CO2_NOR"));break;case 2:this.tickBtn&&(t=e[1]||1,this.tickBtn.setText(t),this.tickBtn.addClass("BT_CO2_NOR"))}},ChartView.prototype.portrait2landscape=function(){this.termBtn2&&(this.termBtn2.removeClass("BT_CO2_NOR"),this.termBtn2.setText("일")),this.tickBtn2&&(this.tickBtn2.removeClass("BT_CO2_NOR"),this.tickBtn2.setText("1"));var t,e=this.getSearchType();switch(e[0]){case 0:this.termBtn2&&(t=e[1]||0,this.termBtn2.setText(this.termMap2[t]),this.termBtn2.addClass("BT_CO2_NOR"),this.tickBtn2.$ele.hide());break;case 1:this.tickBtn2&&this.termBtn2&&(t=e[1]||1,this.tickBtn2.$ele.show(),this.termBtn2.setText("분"),this.tickBtn2.setText(t),this.tickBtn2.addClass("BT_CO2_NOR"));break;case 2:this.tickBtn2&&this.termBtn2&&(t=e[1]||1,this.tickBtn2.$ele.show(),this.termBtn2.setText("틱"),this.tickBtn2.setText(t),this.tickBtn2.addClass("BT_CO2_NOR"))}},ChartView.prototype.onConfigViewPanalChange=function(t){var e,i;this.getContainer().view.onIndiBtnClick?"0"!=t&&0!=t||this.getContainer().view.isCross&&(e=this.getContainer().view.infoBtn)&&this.getContainer().view.onIndiBtnClick(e):this.getContainer().view.tbvManager&&(i=this.getContainer().view.tbvManager.getActiveView()).onIndiBtnClick&&("0"==t||0==t)&&i.isCross&&(e=i.infoBtn)&&i.onIndiBtnClick(e)},ChartView.prototype.setData=function(t){t&&0!=t.length?this.isInit?(this.tempData=null,this.updateOutputData(t)):this.tempData=t:this.clearChart()},ChartView.prototype.setQueryData=function(t,e,i){var n,s=i.getQueryName();if(s==this.realQueryName){if(t&&0!=t.length)if(n=t[0],i.isReal){for(var a in n)this.realData.hasOwnProperty(a)&&(this.realData[a]=n[a]);this.updateRealData()}else this.setSearchData(n)}else"QR000002"!=s&&"QR000003"!=s&&"QR000004"!=s&&"QR000006"!=s&&"QR000015"!=s||(t&&0!=t.length?this.isInit?(this.tempData=null,this.updateOutputData(t)):this.tempData=t:this.clearChart())},ChartView.prototype.getMappingCount=function(){return 2};