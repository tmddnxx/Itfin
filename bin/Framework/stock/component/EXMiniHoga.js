!async function(){await afc.import("Framework/afc/component/AGrid.js"),(EXMiniHoga=class extends AGrid{constructor(){super(),this.frwName="stock",this.quoteCount=10,this.rowLen=0,this.colLen=0,this.btmRowCnt=0,this.basePrice=void 0,this.basePriceKey="",this.curPriceKey="",this.currentCell=null,this.currentPrice=void 0,this.curPriceStyleArr=null,this.upColor=StockColor.UP_COLOR,this.downColor=StockColor.DOWN_COLOR,this.steadyColor=StockColor.STEADY_COLOR,this.barSize="70%",this.valArr=null,this.ctrtMode=!1}}).CONTEXT={tag:'<div data-base="EXMiniHoga" data-class="EXMiniHoga" data-nochange-count="true" data-bottom-count="0"\t\t  data-hide-header="true" data-selectable="true" data-single-select="true" data-flexible-row="true" class="AGrid-Style">\t\t\t<table align="center" class="grid-header-table" style="width: calc(100% - 14px); border-collapse: collapse; table-layout: fixed;">\t\t\t\t<colgroup><col width="50%"><col width="50%"></colgroup>\t\t\t\t<thead align="center" class="head-prop" style="display: none;">\t\t\t\t\t<tr height="22px"><td>col1</td><td>col2</td></tr>\t\t\t\t</thead>\t\t\t</table>\t\t\t<div style="height: 100%; overflow-y: auto; overflow-x: hidden;">\t\t\t\t<table align="center" class="grid-body-table" style="width:100%; border-collapse:collapse; table-layout: fixed;">\t\t\t\t<colgroup><col width="50%"><col width="50%"></colgroup>\t\t\t\t\t<thead align="center" class="head-prop" style="display: none;">\t\t\t\t\t\t<tr height="22px"><td>col1</td><td>col2</td></tr>\t\t\t\t\t</thead>                    <tbody align="center" class="body-prop">\t\t\t\t\t\t<tr height="22px">\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right;"></td>\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right; background: linear-gradient(90deg, #e7f2ff 0%, #e7f2ff 100%) 100% 50% no-repeat;"></td>\t\t\t\t\t\t</tr>\t\t\t\t\t\t<tr height="22px">\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right;"></td>\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right; background: linear-gradient(90deg, #e7f2ff 0%, #e7f2ff 100%) 100% 50% no-repeat;"></td>\t\t\t\t\t\t</tr>\t\t\t\t\t\t<tr height="22px;">\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right;"></td>\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right; background: linear-gradient(90deg, #e7f2ff 0%, #e7f2ff 100%) 100% 50% no-repeat;"></td>\t\t\t\t\t\t</tr>\t\t\t\t\t\t<tr height="22px;">\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right;"></td>\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right; background: linear-gradient(90deg, #e7f2ff 0%, #e7f2ff 100%) 100% 50% no-repeat;"></td>\t\t\t\t\t\t</tr>\t\t\t\t\t\t<tr height="22px;">\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right;"></td>\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right; background: linear-gradient(90deg, #e7f2ff 0%, #e7f2ff 100%) 100% 50% no-repeat;"></td>\t\t\t\t\t\t</tr>\t\t\t\t\t\t<tr height="22px;">\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right;"></td>\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right; background: linear-gradient(90deg, #e7f2ff 0%, #e7f2ff 100%) 100% 50% no-repeat;"></td>\t\t\t\t\t\t</tr>\t\t\t\t\t\t<tr height="22px;">\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right;"></td>\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right; background: linear-gradient(90deg, #e7f2ff 0%, #e7f2ff 100%) 100% 50% no-repeat;"></td>\t\t\t\t\t\t</tr>\t\t\t\t\t\t<tr height="22px;">\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right;"></td>\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right; background: linear-gradient(90deg, #e7f2ff 0%, #e7f2ff 100%) 100% 50% no-repeat;"></td>\t\t\t\t\t\t</tr>\t\t\t\t\t\t<tr height="22px;">\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right;"></td>\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right; background: linear-gradient(90deg, #e7f2ff 0%, #e7f2ff 100%) 100% 50% no-repeat;"></td>\t\t\t\t\t\t</tr>\t\t\t\t\t\t<tr height="22px;">\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right;"></td>\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right; background: linear-gradient(90deg, #e7f2ff 0%, #e7f2ff 100%) 100% 50% no-repeat;"></td>\t\t\t\t\t\t</tr>\t\t\t\t\t\t<tr height="22px;">\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right;"></td>\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right; background: linear-gradient(90deg, #ffebed 0%, #ffebed 100%) 100% 50% no-repeat;"></td>\t\t\t\t\t\t</tr>\t\t\t\t\t\t<tr height="22px;">\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right;"></td>\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right; background: linear-gradient(90deg, #ffebed 0%, #ffebed 100%) 100% 50% no-repeat;"></td>\t\t\t\t\t\t</tr>\t\t\t\t\t\t<tr height="22px;">\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right;"></td>\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right; background: linear-gradient(90deg, #ffebed 0%, #ffebed 100%) 100% 50% no-repeat;"></td>\t\t\t\t\t\t</tr>\t\t\t\t\t\t<tr height="22px;">\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right;"></td>\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right; background: linear-gradient(90deg, #ffebed 0%, #ffebed 100%) 100% 50% no-repeat;"></td>\t\t\t\t\t\t</tr>\t\t\t\t\t\t<tr height="22px;">\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right;"></td>\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right; background: linear-gradient(90deg, #ffebed 0%, #ffebed 100%) 100% 50% no-repeat;"></td>\t\t\t\t\t\t</tr>\t\t\t\t\t\t<tr height="22px;">\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right;"></td>\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right; background: linear-gradient(90deg, #ffebed 0%, #ffebed 100%) 100% 50% no-repeat;"></td>\t\t\t\t\t\t</tr>\t\t\t\t\t\t<tr height="22px;">\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right;"></td>\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right; background: linear-gradient(90deg, #ffebed 0%, #ffebed 100%) 100% 50% no-repeat;"></td>\t\t\t\t\t\t</tr>\t\t\t\t\t\t<tr height="22px;">\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right;"></td>\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right; background: linear-gradient(90deg, #ffebed 0%, #ffebed 100%) 100% 50% no-repeat;"></td>\t\t\t\t\t\t</tr>\t\t\t\t\t\t<tr height="22px;">\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right;"></td>\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right; background: linear-gradient(90deg, #ffebed 0%, #ffebed 100%) 100% 50% no-repeat;"></td>\t\t\t\t\t\t</tr>\t\t\t\t\t\t<tr height="22px;">\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right;"></td>\t\t\t\t\t\t\t<td style="padding: 0px 5px; text-align: right; background: linear-gradient(90deg, #ffebed 0%, #ffebed 100%) 100% 50% no-repeat;"></td>\t\t\t\t\t\t</tr>\t\t\t\t\t</tbody>\t\t\t\t</table>\t\t\t</div>',defStyle:{width:"400px",height:"463px"},events:["dblclick","longtab","select","scrolltop","scrollbottom"]},EXMiniHoga.prototype.init=function(t,e){AGrid.prototype.init.call(this,t,e),this.btmRowCnt=parseInt(this.getAttr("data-bottom-count")),this.rowLen=this.getRowCount()-this.btmRowCnt,this.colLen=this.getColumnCount(),this.quoteCount=this.rowLen/2,this.setCurrentPriceStyleArr([this.getAttr("data-select-up"),this.getAttr("data-select-down"),this.getAttr("data-select-steady")]),this.curPriceKey=this.getAttr("data-field-curprc"),this.basePriceKey=this.getAttr("data-field-baseprc"),this.setUpColor(this.getAttr("data-up-color")),this.setDownColor(this.getAttr("data-down-color")),this.setSteadyColor(this.getAttr("data-steady-color")),this.setBarSize(this.getAttr("data-bar-size")),this.initBar(),this.isDev()||(this.selectStyleName=null),this.valArr=new Array(this.rowLen);for(var i=0;i<this.rowLen;i++){this.valArr[i]=new Array(this.colLen);for(var r=0;r<this.colLen;r++)this.valArr[i][r]=0}},EXMiniHoga.prototype.clearContents=function(){this.tBody.find("td").each(function(){this.textContent="",this.dm&&this.dm.setOriginal("")}),this.initBar()},EXMiniHoga.prototype.resetGrid=function(){this.removeAll(),this.addRow([])},EXMiniHoga.prototype.setBasePrice=function(t){this.basePrice=t=t||void 0;for(var e,i,r=0;r<this.rowLen;r++)"none"!=(e=this.getCell(r,0)).style.display&&(i=this.valArr[r][0],this.basePrice<i?e.style.color=this.upColor:this.basePrice>i?e.style.color=this.downColor:e.style.color=this.steadyColor)},EXMiniHoga.prototype.setBasePriceKey=function(t){this.basePriceKey=t},EXMiniHoga.prototype.setCurrentPrice=function(t){this.currentPrice=t;for(var e,i,r=0;r<this.rowLen;r++)if("none"!=(e=this.getCell(r,0)).style.display&&(i=this.valArr[r][0],this.currentPrice==i))return void this.selectCurrentCell(e)},EXMiniHoga.prototype.setCurPriceKey=function(t){this.curPriceKey=t},EXMiniHoga.prototype.setUpColor=function(t){t&&(this.upColor=t)},EXMiniHoga.prototype.setDownColor=function(t){t&&(this.downColor=t)},EXMiniHoga.prototype.setSteadyColor=function(t){t&&(this.steadyColor=t)},EXMiniHoga.prototype.getUpColor=function(t){return this.upColor},EXMiniHoga.prototype.getDownColor=function(t){return this.downColor},EXMiniHoga.prototype.getSteadyColor=function(t){return this.steadyColor},EXMiniHoga.prototype.selectCurrentCell=function(t){this._clearCurrentCell(),this.currentCell=$(t),null==this.basePrice?this.currentCell.addClass(this.curPriceStyleArr[2]):this.basePrice<this.currentPrice?this.currentCell.addClass(this.curPriceStyleArr[0]):this.basePrice>this.currentPrice?this.currentCell.addClass(this.curPriceStyleArr[1]):this.currentCell.addClass(this.curPriceStyleArr[2]),this._currentCellBordoerRight=this.currentCell[0].style.getPropertyValue("border-right"),this._currentCellBordoerBottom=this.currentCell[0].style.getPropertyValue("border-bottom"),this.currentCell[0].style.setProperty("border-right","none","important"),this.currentCell[0].style.setProperty("border-bottom","none","important")},EXMiniHoga.prototype._clearCurrentCell=function(){this.currentCell&&(this.currentCell.removeClass(this.curPriceStyleArr[0]),this.currentCell.removeClass(this.curPriceStyleArr[1]),this.currentCell.removeClass(this.curPriceStyleArr[2]),this.currentCell[0].style.setProperty("border-right",this._currentCellBordoerRight),this.currentCell[0].style.setProperty("border-bottom",this._currentCellBordoerBottom))},EXMiniHoga.prototype.calcCtrtRate=function(t){return(t=afc.removeComma(t)-this.basePrice)/this.basePrice*100},EXMiniHoga.prototype.setCurrentPriceStyleArr=function(t){this.curPriceStyleArr=["EXMiniHoga-CurPrice-Up","EXMiniHoga-CurPrice-Down","EXMiniHoga-CurPrice-Steady"],t[0]&&(this.curPriceStyleArr[0]=t[0]),t[1]&&(this.curPriceStyleArr[1]=t[1]),t[2]&&(this.curPriceStyleArr[2]=t[2])},EXMiniHoga.prototype.initBar=function(){for(var t,e=10,i=0;i<e;i++)(t=this.getCell(i,1))&&(t.style["background-size"]="0px"),(t=this.getCell(i+e,1))&&(t.style["background-size"]="0px");if(this.isDev())for(e=this.quoteCount,i=0;i<e;i++)this.getCell(i,1).style["background-size"]=(i+1)/e*100+"% "+this.barSize,this.getCell(i+e,1).style["background-size"]=(e-i)/e*100+"% "+this.barSize},EXMiniHoga.prototype.setBarSize=function(t){this.barSize=t=t||"70%";for(var e,i=this.quoteCount,r=0;r<this.quoteCount;r++)e=(e=this.getCell(r,1).style["background-size"])?e.split(" ")[0]:"0px",this.getCell(r,1).style["background-size"]=e+" "+this.barSize,e=(e=this.getCell(r+i,1).style["background-size"])?e.split(" ")[0]:"0px",this.getCell(r+i,1).style["background-size"]=e+" "+this.barSize},EXMiniHoga.prototype.getBarSize=function(){return this.barSize},EXMiniHoga.prototype.setAskBarBgImg=function(t){for(var e=0;e<this.quoteCount;e++)this.getCell(e,1).style["background-image"]=t,this.getCell(e,1).style["background-repeat"]="no-repeat"},EXMiniHoga.prototype.getAskBarBgImg=function(){return this.getCell(0,1).style["background-image"]},EXMiniHoga.prototype.setBidBarBgImg=function(t){for(var e=this.quoteCount;e<this.rowLen;e++)this.getCell(e,1).style["background-image"]=t,this.getCell(e,1).style["background-repeat"]="no-repeat"},EXMiniHoga.prototype.getBidBarBgImg=function(){return this.getCell(this.quoteCount,1).style["background-image"]},EXMiniHoga.prototype.setAskBarPositionX=function(t){for(var e=0;e<this.quoteCount;e++)this.getCell(e,1).style["background-position-x"]=t},EXMiniHoga.prototype.getAskBarPositionX=function(){return this.getCell(0,1).style["background-position-x"]},EXMiniHoga.prototype.setAskBarPositionY=function(t){for(var e=0;e<this.quoteCount;e++)this.getCell(e,1).style["background-position-y"]=t},EXMiniHoga.prototype.getAskBarPositionY=function(){return this.getCell(0,1).style["background-position-y"]},EXMiniHoga.prototype.setBidBarPositionX=function(t){for(var e=this.quoteCount;e<this.rowLen;e++)this.getCell(e,1).style["background-position-x"]=t},EXMiniHoga.prototype.getBidBarPositionX=function(){return this.getCell(this.quoteCount,1).style["background-position-x"]},EXMiniHoga.prototype.setBidBarPositionY=function(t){for(var e=this.quoteCount;e<this.rowLen;e++)this.getCell(e,1).style["background-position-y"]=t},EXMiniHoga.prototype.getBidBarPositionY=function(){return this.getCell(this.quoteCount,1).style["background-position-y"]},EXMiniHoga.prototype.setBottomRowCount=function(t){this.btmRowCnt=t=+(t=t<0?0:t),this.changeRowCount(this.rowLen+t,!1)},EXMiniHoga.prototype.getBottomRowCount=function(){return this.btmRowCnt},EXMiniHoga.prototype.setQuoteCount=function(t){if(10==(t=+t)){for(var e=$(this.getRow(1)),i=this.quoteCount;i<t;i++)e.after(e.clone());for(e=$(this.getRow(t+1)),i=this.quoteCount;i<t;i++)e.after(e.clone())}else if(5==t){for(i=0;i<t;i++)this.removeRow(this.quoteCount+1);for(i=0;i<t;i++)this.removeRow(1)}this.initVariables(),this.init(this.element),this.delegator&&this.delegator.onRowCountChange&&this.delegator.onRowCountChange()},EXMiniHoga.prototype.getQuoteCount=function(){return this.quoteCount},EXMiniHoga.prototype.setDelegator=function(t){this.delegator=t},EXMiniHoga.prototype.setQueryData=function(t,e,i){if(e){var r=t[0];r[this.curPriceKey]&&(this.currentPrice=r[this.curPriceKey]),r[this.basePriceKey]&&(this.basePrice=r[this.basePriceKey]);var o,n,a,s,l,d=-1,g=0,h=0;for(this._clearCurrentCell(),a=0;a<this.rowLen;a++)for(o=this.getRow(a),s=0;s<this.columnCount;s++)"none"!=(l=this.getCell(o,s)).style.display&&(n=e[++d])&&(g=this.valArr[a][s]=+r[n],0==s?(this.currentPrice==g&&this.selectCurrentCell(l),this.basePrice<g?l.style.color=this.upColor:this.basePrice>g?l.style.color=this.downColor:l.style.color=this.steadyColor):h<g&&(h=g));for(AGrid.prototype.setQueryData.call(this,t,e,i),0==h&&(h=1),d=-1,a=0;a<this.rowLen;a++)for(o=this.getRow(a),s=0;s<this.columnCount;s++)"none"!=(l=this.getCell(o,s)).style.display&&(d++,0!=s)&&(n=e[d])&&(g=this.valArr[a][s],l.style.setProperty("background-size",(g/h*100).toFixed(1)+"% "+this.barSize,"important"))}},EXMiniHoga.prototype._getDataStyleObj=function(){for(var t,e=AComponent.prototype._getDataStyleObj.call(this),i=["data-select-class","data-style-header","data-style-body","data-select-up","data-select-down","data-select-steady"],r=0;r<i.length;r++)t=1==r?this.$ele.find("thead").attr(i[r]):2==r?this.$ele.find("tbody").attr(i[r]):this.getAttr(i[r]),e[i[r]]=t||"";return e},EXMiniHoga.prototype._setDataStyleObj=function(t){for(var e in t)e==afc.ATTR_STYLE?this._set_class_helper(this.$ele,null,t,e):"data-style-header"==e?this._set_class_helper(this.$ele.find("thead"),null,t,e):"data-style-body"==e?this._set_class_helper(this.$ele.find("tbody"),null,t,e):this.setAttr(e,t[e])}}();